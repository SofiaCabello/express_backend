## 一个完整的业务流程

**假设有一个*河南郑州中原区410102*的用户A要向*北京市辖区东城区110101*的用户B发送一大一小两个包裹**。我们假设这两个用户都没有注册该系统。

1. 用户A在Web端注册。用户在Web端创建一个`运单Shipment`，并向其中添加两个`包裹Package`。此时包裹状态为`已支付等待pending`或者`到付等待cod_pending`。如果A愿意，他还可以添加地址簿。

   > 之后有可能要在添加包裹和确定状态之间添加支付确认。

2. 410102的区一级工作人员根据移动端的待揽收列表来揽收。此时，揽收的包裹的状态设定为`picked_up`。

3. 410102的区一级工作人员将揽收到的包裹带到区一级网点。并生成条形码。

4. 410102的区一级工作人员创建一个`转运批次Batch`，将这两个包裹添加到这个批次中。设定责任人和车辆ID。将该批次从410102发往4101河南郑州的转运中心。当转运批次完成后，设定转运任务状态为`arrived`。

   > 在转运过程中，需要定时更新两个位置信息：包裹和车辆的位置信息。

5. 从4101 -> 41 -> 11 -> 1101 -> 110101的过程同上。

6. 110101的区一级工作人员根据待派送的列表来派送。派送完毕的设定为`signed`。

