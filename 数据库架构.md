## 客户表`customer`

> 用户是在本系统注册的用户。

* `id`用户唯一标识
* `username`用户名，唯一
* `phone`电话号码，唯一
* `email`邮箱，唯一
* `password_hash`密码哈希
* `salt`盐值
* `address`地址簿，用来记录用户常用地址，json格式

## 员工表`employee`

> 员工表记录了所有参与揽收、运输、派送过程的所有人员。

* `id`员工唯一标识
* `name`员工姓名
* `phone`电话号码，唯一
* `email`邮箱，唯一
* `password_hash`密码哈希
* `salt`盐值
* `serve_at`工作网点

## 网点表`logistic`

> 记录各级网点信息。SQL脚本参照[logistics.sql](./logistics.sql)

- `id`  转运中心或网点的唯一标识。
- `name`名称。
- `parent_id` 父级转运中心或网点的`id`。用于建立层级关系，顶级转运中心此字段为NULL。
- `level` 转运中心或网点的级别（例如，国家级、省级、市级、区/县级等）。
- `district`区/县
- `city` 城市
- `province`省份
- `contact_info` 联系方式（电话或邮箱）

## 运单表 `shipment`

> 运单是用户支付的唯一单位，它会包含一个或多个包裹（考虑到可能会有如搬家的情况）。

* `id`运单唯一标识
* `origin`出发地，外键参照`logistic.id`
* `destination`目的地，外键参照`logistic.id`
* `price`运单价格
* `status`运单状态 ：`enum{'pending', 'cod_pending', 'paid', 'cancelled'}`分别代表待支付（默认）、到付待支付、已支付、取消。
* `customer_id`外键参照`customer.id` 1:1

## 包裹表 `package`

> 包裹是现实世界中的一个包裹，是用户会装箱的最小单位。

* `id`包裹唯一标识
* `create_date`创建时间
* `status`包裹状态 ：`enum{'pending', 'processing', 'in_transit','delivering','signed', 'cancelled'}`分别代表待支付（默认）、处理中、运输中、派送中、已签收、已取消。
* `shipment_id`对应运单id，外键参照`shipment.id` 1:N
* `batch_id`对应转运批次id，外键参照`batch.id` 1:N

## 转运批次表 `batch`

> 转运批次是指快递网点之间的运送最小单位。出于对包裹大小区别、目的地区别的考虑，会对1个或多个包裹建立一个转运批次。

* `id`转运批次唯一标识
* `create_date`创建时间
* `origin`出发地，外键参照`logistic.id`
* `destination`目的地，外键参照`logistic.id`
* `responsible`责任人，外键参照`employee.id`
* `status`转运状态 ： `enum{in_trans, arrive}`
* `vehicle_id`外键参照`vehicles.id`（该转运批次所在载具id，如果已经到达目的地记录最后所在载具id）1:1

## 载具表`vehicle`

> 载具可能包含车辆、船舶、列车、航班，记录其对应车牌号/班次号

* `id`载具唯一标识
* `type`载具类型
* `shift`车牌号/班次
* `coordinate`载具经纬度信息，GIS的POINT格式（如果可能记录位置的话），为此列建立空间索引

用户创建运单（包括1个或多个包裹）-> 快递员揽收并运至区域网点 -> 网点接收到多个不同用户的不同包裹，根据包裹大小分装：大包裹单独建立1个转运批次，小包裹打包成一个转运批次，同时装车发往上级分拣中心 -> 分拣中心拆包，按目的地重新建立转运批次，发往对应转运中心 -> 目的地转运中心收到转运批次，拆包按目的地重新建立转运批次 -> ... ->直到对应网点拆包，进入派送阶段 -> 用户签收，用户支付运单（如果是到付）

